<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
google.load("visualization", "1", {packages:["corechart"]});
     google.setOnLoadCallback(drawChart);
     function drawChart() {
       var data = google.visualization.arrayToDataTable([
		 <%=@chartString%>
		 <%@allHoursSchools.each do |week|%>
         	['<%=week[0]%>',  
			<%@schoolArray.each do |school|%>
				<%if week[1]['students'][school][0].nil?%>
					0,
				<%else%>
					<%=week[1]['students'][school][0]%>,
				<%end%> 
			<%end%>
			],
		 <%end%>
       ]);

       var options = {
         title: 'Total Hours Per Week',
    	 curveType: 'function'
       };

       var chart = new google.visualization.LineChart(document.getElementById('per_week_students_div'));

       chart.draw(data, options);
     }
</script>

<script type="text/javascript">
google.load("visualization", "1", {packages:["corechart"]});
     google.setOnLoadCallback(drawChart);
     function drawChart() {
       var data = google.visualization.arrayToDataTable([
		 <%=@chartString%>
		 <%@allHoursSchools.each do |week|%>
         	['<%=week[0]%>',  
			<%@schoolArray.each do |school|%>
				<%if week[1]['students'][school][0].nil?%>
					0,
				<%else%>
					<%=week[1]['students'][school][0]%>,
				<%end%> 
			<%end%>
			],
		 <%end%>
       ]);

       var options = {
         title: 'Total Hours Per Week'
       };

       var chart = new google.visualization.LineChart(document.getElementById('per_week_students_div'));

       chart.draw(data, options);
     }
</script>

<script type="text/javascript">
google.load("visualization", "1", {packages:["corechart"]});
     google.setOnLoadCallback(drawChart);
     function drawChart() {
       var data = google.visualization.arrayToDataTable([
         ['Date', 'Students', 'Mentors', 'All'],
		 <%@allHours.each do |week|%>
         	['<%=week[0]%>',  <%=week[1][0]%>, <%=week[1][1]%>, <%=week[1][2]%>],
		 <%end%>
       ]);

       var options = {
         title: 'Total Hours Per Week'
       };

       var chart = new google.visualization.LineChart(document.getElementById('per_week_div_curves'));

       chart.draw(data, options);
     }
</script>
<script type="text/javascript">
google.load("visualization", "1", {packages:["corechart"]});
     google.setOnLoadCallback(drawChart);
     function drawChart() {
       var data = google.visualization.arrayToDataTable([
         ['Date', 'Students', 'Mentors', 'All'],
		 <%@allHours.each do |week|%>
         	['<%=week[0]%>',  <%=week[1][3]%>, <%=week[1][4]%>, <%=week[1][5]%>],
		 <%end%>
       ]);

       var options = {
         title: 'Total Hours Cumulative'
       };

       var chart = new google.visualization.LineChart(document.getElementById('cumulative_div'));

       chart.draw(data, options);
     }
</script>

<%=form_tag do%>
	<%= text_field_tag(:year) %>
  	<%= submit_tag("Filter") %>
<%end%>



<div id="per_week_students_div" style="width: 1100px; height: 600px;"></div>
<div id="per_week_div_curves" style="width: 1100px; height: 600px;"></div>
<div id="per_week_div" style="width: 1100px; height: 600px;"></div>
<div id="cumulative_div" style="width: 1100px; height: 600px;"></div>