<script type="text/javascript"
          src="https://www.google.com/jsapi?autoload={
            'modules':[{
              'name':'visualization',
              'version':'1',
              'packages':['corechart']
            }]
          }">
</script>
		  
<script type="text/javascript">
    google.setOnLoadCallback(drawChart);
    function drawChart() {
		
		//Draw the chart which represents how many hours per week per school
       	var PerWeekPerSchoolData = google.visualization.arrayToDataTable([
		<%=@chartString%>
		<%@allHoursSchools.each do |week|%>
         	['<%=week[0]%>',  
			<%@schoolArray.each do |school|%>
				<%if week[1]['students'][school][0].nil?%>
					0,
				<%else%>
					<%=week[1]['students'][school][0]%>,
				<%end%> 
			<%end%>
			],
		 <%end%>
       ]);
       var PerWeekPerSchooloptions = {
		 chart:{
       	  	title: '<%=@selected_year.year_range%>: Total Hours Per <%=Constants::SCHOOL_NAME_REPLACEMENT%> Per Week'
		 },
         width: 900,
         height: 500
       };
       var PerWeekPerSchoolchart = new google.visualization.LineChart(document.getElementById('per_week_per_school_div'));
       PerWeekPerSchoolchart.draw(PerWeekPerSchoolData, PerWeekPerSchooloptions);
	   
	   //Draw the chart which represents the number of hours per week per student per school
       var PerWeekPerStudentdata = google.visualization.arrayToDataTable([
		 <%=@chartString%>
		 <%@allHoursSchools.each do |week|%>
         	['<%=week[0]%>',  
			<%@schoolArray.each do |school|%>
				<%if week[1]['students'][school][1].nil?%>
					0,
				<%else%>
					<%=week[1]['students'][school][1]%>,
				<%end%> 
			<%end%>
			],
		 <%end%>
       ]);
       var PerWeekPerStudentoptions = {
		   chart:{
        	   title: '<%=@selected_year.year_range%>: Average Hours Per Student Per <%=Constants::SCHOOL_NAME_REPLACEMENT%> Per Week'
		   },
         width: 900,
         height: 500
       };
       var PerWeekPerStudentchart = new google.visualization.LineChart(document.getElementById('per_week_per_student_per_school_div'));
       PerWeekPerStudentchart.draw(PerWeekPerStudentdata, PerWeekPerStudentoptions);
	   
	   //Draw the chart which represents the total number of hours per week
       var PerWeekdata = google.visualization.arrayToDataTable([
         ['Date', 'Students', 'Mentors', 'All'],
		 <%@allHours.each do |week|%>
         	['<%=week[0]%>',  <%=week[1][0]%>, <%=week[1][1]%>, <%=week[1][2]%>],
		 <%end%>
       ]);
       var PerWeekoptions = {
		   chart:{
        	   title: '<%=@selected_year.year_range%>: Total Hours Per Week'
		   },
         width: 900,
         height: 500
       };
       var PerWeekchart = new google.visualization.LineChart(document.getElementById('per_week_div'));
       PerWeekchart.draw(PerWeekdata, PerWeekoptions);
	   
	   //Draw the chart which represents the cumulative hours per week
       var Cumulativedata = google.visualization.arrayToDataTable([
         ['Date', 'Students', 'Mentors', 'All'],
		 <%@allHours.each do |week|%>
         	['<%=week[0]%>',  <%=week[1][3]%>, <%=week[1][4]%>, <%=week[1][5]%>],
		 <%end%>
       ]);
       var Cumulativeoptions = {
		   chart:{
        	   title: '<%=@selected_year.year_range%>: Total Cumulative Hours'
		   },
         width: 900,
         height: 500
       };
       var Cumulativechart = new google.visualization.LineChart(document.getElementById('cumulative_div'));
       Cumulativechart.draw(Cumulativedata, Cumulativeoptions);
     }
	 
	 //Draw chart for number of hours per da of the week
</script>

</script>
 <script type="text/javascript">
     google.setOnLoadCallback(drawChart);

     function drawChart() {

       var ByDaydata = new google.visualization.DataTable();
       ByDaydata.addColumn('string', 'Day of the Week');
	   <%for i in 1..@monday.size%>
       		ByDaydata.addColumn('number', '<%="Week #{i}"%>');
       <%end%>

       ByDaydata.addRows([
         ['Monday',  
		   <%@monday.each do |value|%>
		   		<%=value%>,
		   <%end%>
	   		],
		['Tuesday',  
		  <%@tuesday.each do |value|%>
		  		<%=value%>,
		  <%end%>
		],
		['Wednesday',  
		  <%@wednesday.each do |value|%>
		  		<%=value%>,
		  <%end%>
		],
		['Thursday',  
		  <%@thursday.each do |value|%>
		  		<%=value%>,
		  <%end%>
		],
		['Friday',  
		  <%@friday.each do |value|%>
		  		<%=value%>,
		  <%end%>
		],
		['Saturday',  
		  <%@saturday.each do |value|%>
		  		<%=value%>,
		  <%end%>
		],
		['Sunday',  
		  <%@sunday.each do |value|%>
		  		<%=value%>,
		  <%end%>
		],
     
       ]);

       var ByDayoptions = {
         chart: {
           title: 'Number of Hours Per Day of the Week',
			 
         },
         width: 900,
         height: 500,
       };

       var ByDaychart = new google.visualization.LineChart(document.getElementById('hours_by_day_of_week'));

       ByDaychart.draw(ByDaydata, ByDayoptions);
     }
</script>

<%=form_tag do%>
	<div class="form-group">
		<div class="col-lg-4 col-md-4">
			<%= select_tag("year", options_for_select(yearDropdown, @selected_year.id),{:class=>"form-control"})%>
	  	</div>
		<%= submit_tag("Filter", :class=>"btn btn-primary") %>
	</div>
<%end%>

<br />

<div id="per_week_per_school_div" class="text-center"></div> <br /><br />
<div id="per_week_per_student_per_school_div" class="text-center"></div><br /><br />
<div id="per_week_div" class="text-center"></div><br /><br />
<div id="cumulative_div" class="text-center"></div><br /><br />
<div id="hours_by_day_of_week" class="text-center"></div>